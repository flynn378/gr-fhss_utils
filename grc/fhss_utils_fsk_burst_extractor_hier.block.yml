# auto-generated by grc.converter

id: fsk_burst_extractor_hier
label: FSK Burst Extractor Hier
category: '[Sandia]/FHSS Utilities'

parameters:
-   id: samp_rate
    label: Sample Rate [Hz]
    dtype: int
    default: samp_rate
    hide: none
-   id: center_freq
    label: Center Frequency [Hz]
    dtype: float
    default: center_freq
    hide: none
-   id: decimation
    label: Decimation
    dtype: int
    default: '32'
    hide: none
-   id: fft_size
    label: FFT Size
    dtype: int
    default: '256'
    hide: none
-   id: threshold
    label: Threshold [dB]
    dtype: real
    default: '6'
    hide: none
-   id: burst_width
    label: Burst Width [Hz]
    dtype: int
    default: int(500e3)
    hide: part
-   id: hist_time
    label: History Time [s]
    dtype: real
    default: '0.004'
    hide: part
-   id: lookahead_time
    label: Lookahead Time [s]
    dtype: real
    default: '0.0005'
    hide: part
-   id: max_burst_time
    label: Max Burst Time [s]
    dtype: real
    default: '0.5'
    hide: part
-   id: min_burst_time
    label: Min Burst Time [s]
    dtype: real
    default: '0.001'
    hide: part
-   id: pre_burst_time
    label: Pre Burst Time [s]
    dtype: real
    default: '0.00008'
    hide: part
-   id: post_burst_time
    label: Post Burst Time [s]
    dtype: real
    default: '0.00008'
    hide: part
-   id: output_cutoff
    label: Output Cutoff [cycles/samp]
    dtype: real
    default: '0.5'
    hide: part
-   id: output_trans_width
    label: Output Trans. Width [cycles/samp]
    dtype: real
    default: '0.05'
    hide: part
-   id: output_attenuation
    label: Output Attenuation
    dtype: real
    default: '40'
    hide: part
-   id: cfo_samps_to_average
    label: CFO Samps to Avg
    dtype: real
    default: '2048'
    hide: part
-   id: cfo_bin_resolution
    label: CFO Bin Resolution
    dtype: real
    default: '10000'
    hide: part

inputs:
-   domain: stream
    dtype: complex
    vlen: 1

outputs:
-   domain: message
    id: pdu_out
asserts:
- ${ decimation % 2 == 0 }

templates:
    imports: import fhss_utils
    make: |-
        fhss_utils.fsk_burst_extractor_hier(
            burst_width=${burst_width},
            center_freq=${center_freq},
            decimation=${decimation},
            fft_size=${fft_size},
            hist_time=${hist_time},
            lookahead_time=${lookahead_time},
            max_burst_time=${max_burst_time},
            min_burst_time=${min_burst_time},
            output_attenuation=${output_attenuation},
            output_cutoff=${output_cutoff},
            output_trans_width=${output_trans_width},
            post_burst_time=${post_burst_time},
            pre_burst_time=${pre_burst_time},
            samp_rate=${samp_rate},
            threshold=${threshold},
            cfo_samps_to_average=${cfo_samps_to_average},
            cfo_bin_resolution=10000
        )

file_format: 1
